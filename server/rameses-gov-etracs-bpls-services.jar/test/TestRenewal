def c = [
    "app.host" : "localhost:8070",
    "app.cluster" : "osiris3",
    "app.context" : "etracs25"
];

def tp = new TestProxy(c);

def qSvc = tp.create("QueryService");
def n = [_schemaname: "business_account"];
n.where = ["1=1"];
def p = qSvc.findFirst( n );

def svc = tp.create("PersistenceService");
def m = [_schemaname: 'vw_business_account' ];
m.objid = p.objid;
def acct = svc.read(m);

def app = [_schemaname:'business_application'];
app.businessacctid = acct.objid;
app.apptype = 'RENEW';
app.txnmode = 'ONLINE';
app.appyear = acct.year + 1 ;
app.particulars = 'RENEW remarks';
app.lobs = acct.lobs.collect{ [lobid:it.lobid, particulars: 'understand the bounce', assessmenttype: 'RENEW', lob: it.lob] };
svc.create(app);
