def c = [
    "app.host" : "localhost:8070",
    "app.cluster" : "osiris3",
    "app.context" : "etracs25"
];

def tp = new TestProxy(c);

def qSvc = tp.create("QueryService");
def n = [_schemaname: "business_account"];
n.where = ["1=1"];
def p = qSvc.findFirst( n );

def svc = tp.create("PersistenceService");
def m = [_schemaname: 'vw_business_account' ];
m.objid = p.objid;
def acct = svc.read(m);
def lob_retire = acct.lobs.first(); 

def app = [_schemaname:'business_application'];
app.businessacctid = acct.objid;
app.apptype = 'ADDITIONAL';
app.txnmode = 'ONLINE';
app.particulars = 'REMOVE 1 LOB AND ADD A TWO NEW LOBS';
app.retiredlobs = [];

app.retiredlobs << [ businesslobid: lob_retire.objid ];

app.lobs = [];
app.lobs << [ lobid:'L-490de1ce:1409e43d1fa:-7fbc', 
    assessmenttype:'NEW',
    lob: [ objid:'L-490de1ce:1409e43d1fa:-7fbc', name: 'BAKERY' ], particulars:'NEW ENTRY' ];
 
app.lobs << [ lobid:'L-4e11e804:140b810a4bc:-7f1f', 
    assessmenttype:'NEW',
    lob: [ objid:'L-4e11e804:140b810a4bc:-7f1f', name: 'ARTS AND SIGNS' ], particulars:'NEW ENTRY' ];

svc.create(app);
